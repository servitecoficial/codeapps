<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Servitec</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-dark text-white d-flex justify-content-center align-items-center vh-100">

<div class="text-center" style="width:420px">

  <h1 class="text-info mb-2">SERVITEC</h1>
  <h1 class="text-info mb-2">Conecci贸n exitosa. podes descargar</h1>
  <div id="clientName" class="mb-3 fs-5"></div>

  <input id="codeInput" class="form-control mb-3" placeholder="Ingrese c贸digo">

  <button class="btn btn-info w-100 mb-3" onclick="connect()">
    CONECTAR
  </button>

  <div id="result"></div>

</div>

<script>

const config = JSON.parse(localStorage.getItem("servitecConfig"));

if(config){
  document.getElementById("clientName").innerText =
    "Cliente: " + config.clientName;
}else{
  document.getElementById("clientName").innerText =
    "No hay configuraci贸n activa";
}

function connect(){

  const inputCode = document.getElementById("codeInput").value.trim();
  const result = document.getElementById("result");

  if(!config){
    result.innerHTML = "<p style='color:red'>No hay archivo configurado</p>";
    return;
  }

  if(inputCode !== config.code){
    result.innerHTML = "<p style='color:red'>C贸digo incorrecto</p>";
    return;
  }

  result.innerHTML = `
    <a href="${config.filePath}"
       class="btn btn-success btn-lg w-100"
       download>
       Descargar ${config.fileName}
    </a>
  `;
}

</script>

</body>
</html>
